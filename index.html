<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta property="og:type" content="website">
<meta property="og:title" content="一个不愿透露姓名的网友的博客">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="一个不愿透露姓名的网友的博客">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="一个不愿透露姓名的网友的博客">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/">





  <title>一个不愿透露姓名的网友的博客</title>
  








</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">一个不愿透露姓名的网友的博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">真香</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/10/15/二分图&匈牙利算法/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="无敌 .2.0">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一个不愿透露姓名的网友的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/10/15/二分图&匈牙利算法/" itemprop="url">二分图&匈牙利算法</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-10-15T22:13:03+08:00">
                2019-10-15
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>author:tc<br>勤劳的tc来了首先是二分图<br>他主要是有两个顶点集，然后顶点之间不能连接起来。？。。<br>怎么判断它是二分图？。。<br>先将一个一个点标记为1（或者0）然后与它连接起来的为标记的的就标记为0（或者1），如果该点已经标记，则判断他是否和顶点的值相同，相同则不为二分图，反之则是是。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">bool is_two() &#123;</span><br><span class="line">	queue&lt;int&gt; que;</span><br><span class="line">	que.push(1);</span><br><span class="line">	int from;</span><br><span class="line">	visit[1]=1;</span><br><span class="line">	while(!que.empty()) &#123;</span><br><span class="line">		from=que.front();</span><br><span class="line">		que.pop();</span><br><span class="line">		int i=1;</span><br><span class="line">		for(i; i&lt;=n; i++) &#123;</span><br><span class="line">			if(map[from][i]) &#123;</span><br><span class="line">				if(!visit[i]) &#123;</span><br><span class="line">					que.push(i);</span><br><span class="line">					visit[i]=(visit[from]&amp;1)+1;</span><br><span class="line">				&#125; else if(visit[i]==visit[from]) &#123;</span><br><span class="line">					return false;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	return true;</span><br><span class="line">&#125;</span><br><span class="line">```  </span><br><span class="line">匈牙利算法主要是解决是二分图匹配问题。  </span><br><span class="line">一个顶点可以与多个结点相连。如果一个顶点只连接一个顶点求最多可以连接多少。  </span><br><span class="line">假如 a可以和c,d,e,f相连，h可以和c,d,m,n,  z可以和c,d,k相连。</span><br><span class="line">首先先匹配a和c。  </span><br><span class="line">第二步是匹配h，h不能喝c匹配，但是h并不想换人，所以就返回去看a能不能换a没办法只能换一个换到了d，h匹配到了c。最后就是z了，他也想匹配c，可是他也不想换，只能h换了，h换成了d可是d又和a匹配了，h也不想换之后a换了，a最后换成了e。最后a，h，z都匹配好了。  </span><br><span class="line">当然这个换人的过程是用递归实现的。</span><br></pre></td></tr></table></figure></p>
<p>bool find(int x) {<br>    int j=1;<br>    for(; j&lt;=n; j++) {<br>        if(map[x][j]&amp;&amp;!visit[j]) {<br>            visit[j]=true;<br>            if(!match[j]||find(match[j])) {<br>                match[j]=x;<br>                return true;<br>            }<br>        }<br>    }<br>    return false;<br>}<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">以下是题目:  </span><br><span class="line">[hdu2444](http://acm.hdu.edu.cn/showproblem.php?pid=2444)   </span><br><span class="line">这道题先要判断是否为二分图，否的话输出-1</span><br></pre></td></tr></table></figure></p>
<p>#include<iostream></iostream></p>
<p>#include<cstring></cstring></p>
<p>#include<queue><br>using namespace std;</queue></p>
<p>//bool find()</p>
<p>int map[205][205];</p>
<p>int match[205];<br>int visit[205];</p>
<p>int n,m;</p>
<p>bool find(int x) {<br>    int j=1;<br>    for(; j&lt;=n; j++) {<br>        if(map[x][j]&amp;&amp;!visit[j]) {<br>            visit[j]=true;<br>            if(!match[j]||find(match[j])) {<br>                match[j]=x;<br>                return true;<br>            }<br>        }<br>    }<br>    return false;<br>}</p>
<p>bool is_two() {<br>    queue<int> que;<br>    que.push(1);<br>    int from;<br>    visit[1]=1;<br>    while(!que.empty()) {<br>        from=que.front();<br>        que.pop();<br>        int i=1;<br>        for(i; i&lt;=n; i++) {<br>            if(map[from][i]) {<br>                if(!visit[i]) {<br>                    que.push(i);<br>                    visit[i]=(visit[from]&amp;1)+1;<br>                } else if(visit[i]==visit[from]) {<br>                    return false;<br>                }<br>            }<br>        }<br>    }<br>    return true;<br>}</int></p>
<p>int main() {<br>    cin.tie(NULL);<br>    cout.tie(NULL);<br>    ios::sync_with_stdio(false);<br>    while(cin&gt;&gt;n&gt;&gt;m) {<br>        memset(map,0,sizeof map);<br>        memset(match,0,sizeof match);<br>        memset(visit,0,sizeof visit);<br>        int i=0,one,two;<br>        for(; i&lt;m; i++) {<br>            cin&gt;&gt;one&gt;&gt;two;<br>            map[one][two]=1;<br>            map[two][one]=1;<br>        }<br>        int ans=0;<br>        if(!is_two()||n==1) {<br>            cout&lt;&lt;”No”&lt;&lt;endl;<br>            continue;<br>        }<br>        for(int i=1; i&lt;=n; i++) {<br>            memset(visit,0,sizeof visit);<br>            ans+=find(i);<br>        }<br>        cout&lt;&lt;ans/2&lt;&lt;endl;<br>    }<br>    return 0;<br>}<br><code>`</code></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/09/24/Untitled-1/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="无敌 .2.0">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一个不愿透露姓名的网友的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/09/24/Untitled-1/" itemprop="url">树形dp&&一些其他的很杂的东西</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-09-24T22:07:56+08:00">
                2019-09-24
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Oh，Oh勤劳的tc来了 。。<br>讲道理 很久没写了，也并不是很勤劳（小声bb）先是树形dp<br>就像他的名字这个dp是对像树一样的数据进行dp一般都是图，毕竟图你把每个点连起来就像树一样？！<br>说是dp其实我觉得像dfs+dp。<br>因为他的数据和树一样，所以普通的dp是完成不了的。首先他的一个节点上有很多个儿子结点，儿子节点上又有很多结点。所以这里用了dfs从他的叶子结点dp从他的叶子结点就开始判断最佳路径。<br>下面是题目<br><a href="http://acm.hdu.edu.cn/showproblem.php?pid=1011" target="_blank" rel="noopener">hdu 1011</a><br>首先他一个士兵可以打败20个怪兽意思，但是即使只有一个怪兽也要用1个士兵。所以这里判断士兵用量就是（bugs+19）/20 。然后dp的部分，先用一个数组二维的int型value[u][v]来记录他的路径。 u就是当前所在层数，然后v就是当前层数所有的士兵数，然后他是从后往前dp的所以他的dp转移方程就是<br>value[u][v]=max(value[u][v],value[u][v-j]+value[next][j]);这里的next就是和当前节点相连的一个节点然后他在第n层的最大brain获取量就是第u层留下v-j的brain获取量和next层花费j士兵是获取的brain量<br>code：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;unordered_map&gt;</span><br><span class="line">#include&lt;algorithm&gt;</span><br><span class="line">#include&lt;cmath&gt;</span><br><span class="line">#include&lt;queue&gt;</span><br><span class="line">#include&lt;cstring&gt;</span><br><span class="line">#include&lt;vector&gt;</span><br><span class="line">#define fastc cin.tie(NULL);</span><br><span class="line">#define fasto cout.tie(NULL);</span><br><span class="line">#define fasts ios::sync_with_stdio(false);</span><br><span class="line">#define END return 0;</span><br><span class="line">#include&lt;iomanip&gt;</span><br><span class="line"></span><br><span class="line">using namespace std;</span><br><span class="line">//char num[1000];</span><br><span class="line"></span><br><span class="line">int value[101][101];//记录值进行dp</span><br><span class="line">int visit[101];//看是否访问过，避免重复查找。</span><br><span class="line">int rec[101][101];//记录地图</span><br><span class="line">typedef pair&lt;int,int&gt; P;//储存bugs和brains</span><br><span class="line">P pa[101];</span><br><span class="line"></span><br><span class="line">int n,m;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">void dp(int u) &#123;</span><br><span class="line">	visit[u]=1;</span><br><span class="line">	int cost=(pa[u].first+19)/20;</span><br><span class="line">	for(int i=m; i&gt;=cost; i--) &#123;</span><br><span class="line">		value[u][i]=pa[u].second;//在第u层花费了cost个士兵都可以获得所有的brain</span><br><span class="line">	&#125;</span><br><span class="line">	for(int i=1; i&lt;=n; i++) &#123;</span><br><span class="line">		if(rec[u][i] &amp;&amp; !visit[i]) &#123;</span><br><span class="line">			dp(i);</span><br><span class="line">			for(int j=m; j&gt;=cost; j--) &#123;</span><br><span class="line">				int rest=j-cost;</span><br><span class="line">				for(int k=1; k&lt;=rest; k++) &#123;</span><br><span class="line">					value[u][j]=max(value[u][j],value[i][k]+value[u][j-k]);</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void prin() &#123;</span><br><span class="line">	for(int i=0; i&lt;=n; i++) &#123;</span><br><span class="line">		for(int j=0; j&lt;=m; j++) &#123;</span><br><span class="line">			cout&lt;&lt;value[i][j]&lt;&lt;&quot; &quot;;</span><br><span class="line">		&#125;</span><br><span class="line">	cout&lt;&lt;endl;</span><br><span class="line">	&#125;</span><br><span class="line">	//cout&lt;&lt;endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">int main() &#123;</span><br><span class="line">	fastc fasto fasts</span><br><span class="line">	while(cin&gt;&gt;n&gt;&gt;m) &#123;</span><br><span class="line">		if(n==m&amp;&amp;n==-1) break;</span><br><span class="line">		memset(value,0,sizeof(value));</span><br><span class="line">		memset(visit,0,sizeof(visit));</span><br><span class="line">		memset(pa,0,sizeof(pa));</span><br><span class="line">		memset(rec,0,sizeof(rec));</span><br><span class="line">		int i=1;</span><br><span class="line">		for(i; i&lt;=n; i++) &#123;</span><br><span class="line">			cin&gt;&gt;pa[i].first&gt;&gt;pa[i].second;</span><br><span class="line">		&#125;</span><br><span class="line">		int one,two;</span><br><span class="line">		for(i=1; i&lt;n; i++) &#123;</span><br><span class="line">			cin&gt;&gt;one&gt;&gt;two;</span><br><span class="line">			rec[one][two]=1;</span><br><span class="line">			rec[two][one]=1;</span><br><span class="line">		&#125;</span><br><span class="line">		dp(1);</span><br><span class="line">		prin();</span><br><span class="line">		cout&lt;&lt;value[1][m]&lt;&lt;endl;</span><br><span class="line">	&#125;</span><br><span class="line">	END</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>题目：<br>dfs剪枝<br><a href="http://acm.hdu.edu.cn/showproblem.php?pid=1010" target="_blank" rel="noopener">hdu1010</a><br>这题是已经规定了步数<br>|0|1|0|1|0|1|<br>–|:–:|–:|–:|–:|–:|<br>|1|0|1|0|1|0|<br>|0|1|0|1|0|1|<br>|1|0|1|0|1|0|<br>|0|1|0|1|0|1|<br>|1|0|1|0|1|0|<br>|0|1|0|1|0|1|<br>|1|0|1|0|1|0|<br>|0|1|0|1|0|1|<br>|1|0|1|0|1|0|<br>|0|1|0|1|0|1|<br>可以知道从1走到0的步数一定是奇数<br>这里是最重要的一个剪枝，只有当起点的横纵坐标的奇偶性相同时，步数必须是奇数，反之则是偶数。<br>数论小知识<br>题目：<br><a href="http://acm.hdu.edu.cn/showproblem.php?pid=1013" target="_blank" rel="noopener">hdu1013</a><br>Digtial Roots=(sum-1)%9+1 </p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/09/10/2019暑假答辩/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="无敌 .2.0">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一个不愿透露姓名的网友的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/09/10/2019暑假答辩/" itemprop="url">吴天赐2019暑假答辩/周任务上传下载</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-09-10T21:44:21+08:00">
                2019-09-10
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>eeee,因为一些原因我这里只有后台。<br>主要的操作只有一些基础的增删改查，然后就是上传下载还有就是删除文件。<br>路径我是写在了yml中然后通过@ConfigurationProperties注解建立一个路径的properties的映射叫filePath，之后再使用路径。<br>api的接口是用swagger写的，但是我这里用的方法不对，不过swagger还是很好用的不过他要到几个依赖<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;io.springfox&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;springfox-swagger2&lt;/artifactId&gt;</span><br><span class="line">            &lt;version&gt;2.5.0&lt;/version&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;io.springfox&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;springfox-swagger-ui&lt;/artifactId&gt;</span><br><span class="line">            &lt;version&gt;2.5.0&lt;/version&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br></pre></td></tr></table></figure></p>
<p>还有就是这两个依赖的版本最好一样，不然会出现bug，接口文档通过注解，然后再通过浏览器获取网址<br>网址一般都是：<a href="http://localhost:8080/swagger-ui.html" target="_blank" rel="noopener">http://localhost:8080/swagger-ui.html</a><br>然后还可以在上面测试接口。<br>我这回用的是前后端分离，通过controller返回的是一个Result的模板类，其中有前端向后台请求的数据和返回的关于请求的信息。<br>上传的主要逻辑是先获取上传文件，然后判断是否是压缩文件，不是的话就返回用户他的文件信息，反之继续。文件的路径名用filePath中的路径当做母路径，母路径上再加上他的文件id、时间、一个随机数作为他的子路径。然后再用file.transferTo进行上传。之后再更新他的任务的信息，成员的信息，和提交信息。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line">package com.ctgu.upndo.controller;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">import com.ctgu.upndo.pojo.Member;</span><br><span class="line">import com.ctgu.upndo.pojo.Submit;</span><br><span class="line">import com.ctgu.upndo.pojo.Task;</span><br><span class="line">import com.ctgu.upndo.propeties.propeties;</span><br><span class="line">import com.ctgu.upndo.service.SaveAndFlushService;</span><br><span class="line">import com.ctgu.upndo.service.SearchService;</span><br><span class="line">import com.ctgu.upndo.utils.CodeEnum;</span><br><span class="line">import com.ctgu.upndo.utils.GetWayRan;</span><br><span class="line">import com.ctgu.upndo.utils.Result;</span><br><span class="line">import io.swagger.annotations.ApiImplicitParam;</span><br><span class="line">import io.swagger.annotations.ApiImplicitParams;</span><br><span class="line">import io.swagger.annotations.ApiOperation;</span><br><span class="line">import org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line">import org.springframework.stereotype.Controller;</span><br><span class="line">import org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line">import org.springframework.web.bind.annotation.RequestParam;</span><br><span class="line">import org.springframework.web.bind.annotation.RestController;</span><br><span class="line">import org.springframework.web.multipart.MultipartFile;</span><br><span class="line"></span><br><span class="line">import java.awt.print.Pageable;</span><br><span class="line">import java.io.File;</span><br><span class="line"></span><br><span class="line">@RestController</span><br><span class="line">@RequestMapping(&quot;/upload&quot;)</span><br><span class="line">public class UploadController &#123;</span><br><span class="line">    @Autowired</span><br><span class="line">    propeties filepath;</span><br><span class="line">    @Autowired</span><br><span class="line">    SearchService searchService;</span><br><span class="line">    @Autowired</span><br><span class="line">    SaveAndFlushService saveAndFlushService;</span><br><span class="line">@ApiOperation(value=&quot;上传&quot;)</span><br><span class="line">@ApiImplicitParams(&#123;</span><br><span class="line">        @ApiImplicitParam(name=&quot;file&quot;,value=&quot;前端文件，只有一个&quot;),</span><br><span class="line">        @ApiImplicitParam(name=&quot;submit&quot;,value = &quot;提交详细Submit对象&quot;)</span><br><span class="line">&#125;)</span><br><span class="line">    @RequestMapping(&quot;/one&quot;)</span><br><span class="line">    public Result&lt;Integer&gt; upload( @RequestParam(&quot;file&quot;) MultipartFile file, @RequestParam(&quot;submit&quot;) Submit submit) &#123;</span><br><span class="line">        Result&lt;Integer&gt; res = new Result&lt;&gt;();</span><br><span class="line">        try &#123;</span><br><span class="line">            if (file.isEmpty()) &#123;</span><br><span class="line">                res.setResult(&quot;文件是空的啊..&quot;);</span><br><span class="line">                return res;</span><br><span class="line">            &#125;</span><br><span class="line">            String fileName = file.getOriginalFilename();</span><br><span class="line">            String suffixName = fileName.substring(fileName.lastIndexOf(&quot;.&quot;));</span><br><span class="line">            if (suffixName != &quot;zip&quot; &amp;&amp; suffixName!=&quot;rar&quot;) &#123;</span><br><span class="line">                res.setResult(&quot;30008&quot;,&quot;文件必须是zip和rar的啊,你的怎么是&quot; + suffixName + &quot;的啊&quot;);</span><br><span class="line">                return res;</span><br><span class="line">            &#125;</span><br><span class="line">            Result&lt;Member&gt; rm = searchService.findMemberByTidAndUid(submit.getTid(), submit.getSid());</span><br><span class="line">            if(rm.getData()==null)&#123;</span><br><span class="line">                res.setResult(CodeEnum.UPLOAD_ERROR);</span><br><span class="line">                return res;</span><br><span class="line">            &#125;</span><br><span class="line">            Member member=rm.getData();</span><br><span class="line">            Integer times = rm.getData().getTimes();</span><br><span class="line">            times++;</span><br><span class="line">            Integer ta = submit.getTid();</span><br><span class="line">            member.setTimes(times);</span><br><span class="line">            String ran= GetWayRan.getUpLoadRandom();</span><br><span class="line">            String path = filepath.getUpload_path()+ta.toString()+File.separator+ran+suffixName;</span><br><span class="line">            submit.setWay(path);</span><br><span class="line">            member.setLast(path);</span><br><span class="line">            File fi = new File(path);</span><br><span class="line">            if (!fi.getParentFile().exists()) &#123;</span><br><span class="line">                fi.getParentFile().mkdir();</span><br><span class="line">            &#125;</span><br><span class="line">            if (times == 1) &#123;</span><br><span class="line">                Result&lt;Task&gt; rt = searchService.findTaskByTid(submit.getTid());</span><br><span class="line">                Task task=rt.getData();</span><br><span class="line">                Integer number = task.getFinish();</span><br><span class="line">                number++;</span><br><span class="line">                task.setFinish(number);</span><br><span class="line">                saveAndFlushService.SaveAndFlushTask(task);</span><br><span class="line">            &#125;</span><br><span class="line">            file.transferTo(fi);</span><br><span class="line">            saveAndFlushService.SaveSubmit(submit);</span><br><span class="line">            saveAndFlushService.SaveAndFlushMember(member);</span><br><span class="line">        &#125; catch (Exception e) &#123;</span><br><span class="line">            res.setResult(CodeEnum.UPLOAD_ERROR);</span><br><span class="line">        &#125;</span><br><span class="line">        res.setResult(CodeEnum.UPDATE_SUCCESS);</span><br><span class="line">        return res;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>然后是下载，下载分为 两种学生下载，和管理员下载。学生下载需要前端传来判断信息。然后通过路径通过缓冲流进行下载。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line">package com.ctgu.upndo.controller;</span><br><span class="line"></span><br><span class="line">import com.ctgu.upndo.pojo.Submit;</span><br><span class="line">import com.ctgu.upndo.service.SearchService;</span><br><span class="line">import com.ctgu.upndo.utils.CodeEnum;</span><br><span class="line">import com.ctgu.upndo.utils.GetNumber;</span><br><span class="line">import com.ctgu.upndo.utils.Result;</span><br><span class="line">import com.ctgu.upndo.utils.ToNumber;</span><br><span class="line">import io.swagger.annotations.ApiImplicitParam;</span><br><span class="line">import io.swagger.annotations.ApiImplicitParams;</span><br><span class="line">import io.swagger.annotations.ApiOperation;</span><br><span class="line">import org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line">import org.springframework.stereotype.Controller;</span><br><span class="line">import org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line">import org.springframework.web.bind.annotation.RequestParam;</span><br><span class="line">import org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line">import javax.servlet.http.HttpServletRequest;</span><br><span class="line">import javax.servlet.http.HttpServletResponse;</span><br><span class="line">import java.io.*;</span><br><span class="line">import java.util.List;</span><br><span class="line"></span><br><span class="line">@RestController</span><br><span class="line">@RequestMapping(&quot;/download&quot;)</span><br><span class="line">public class DownloadController &#123;</span><br><span class="line"></span><br><span class="line">    @Autowired</span><br><span class="line">    SearchService searchService;</span><br><span class="line">@ApiOperation(value=&quot;下载&quot;)</span><br><span class="line">@ApiImplicitParam(name=&quot;list&quot;,value=&quot;String对象，下载项目序号&quot;)</span><br><span class="line">    @RequestMapping(value = &quot;student&quot;)</span><br><span class="line">    public Result&lt;Integer&gt; upload(HttpServletRequest request, HttpServletResponse response,@RequestParam(value = &quot;path&quot;) String path,@RequestParam(value = &quot;judge&quot;) String judge)&#123;</span><br><span class="line">        Result&lt;Integer&gt; res=new Result&lt;&gt;();</span><br><span class="line">        Integer flag= ToNumber.getNumber(judge);</span><br><span class="line">        if(flag==0)&#123;</span><br><span class="line">            res.setResult(&quot;30013&quot;,&quot;未在时限内，不可下载&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">        res.setResult(CodeEnum.DOWNLOAD_SUCCESS);</span><br><span class="line">        String status=null;</span><br><span class="line">        String fileName=new String();</span><br><span class="line">        BufferedInputStream bis = null;</span><br><span class="line">        try&#123;</span><br><span class="line">            File file=new File(path);</span><br><span class="line">            if(!file.exists())&#123;</span><br><span class="line">                res.setResult(&quot;30012&quot;,&quot;文件为空&quot;);</span><br><span class="line">                return res;</span><br><span class="line">            &#125;</span><br><span class="line">            fileName=file.getName();</span><br><span class="line">            response.setContentType(&quot;application/force-download&quot;);// 设置强制下载不打开</span><br><span class="line">            response.addHeader(&quot;Content-Disposition&quot;, &quot;attachment;fileName=&quot; + fileName);// 设置文件名</span><br><span class="line">            byte[] buffer=new byte[1024];</span><br><span class="line">            bis=new BufferedInputStream(new FileInputStream(file));</span><br><span class="line">            OutputStream os=response.getOutputStream();</span><br><span class="line">            int number=bis.read(buffer);</span><br><span class="line">            while(number!=-1)&#123;</span><br><span class="line">                os.write(buffer,0,number);</span><br><span class="line">                number=bis.read(buffer);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;catch(Exception e)&#123;</span><br><span class="line">            res.setResult(CodeEnum.DOWNLOAD_ERROR);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        return res;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>管理员的复杂一点，前端传来字符串然后我进行处理得出他的需要下载的id。然后将文件打包成zip放在客户端上进行下载。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><span class="line">package com.ctgu.upndo.controller;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">import com.ctgu.upndo.mapper.MemberMapper;</span><br><span class="line">import com.ctgu.upndo.mapper.TaskMapper;</span><br><span class="line">import com.ctgu.upndo.pojo.Member;</span><br><span class="line">import com.ctgu.upndo.pojo.Task;</span><br><span class="line">import com.ctgu.upndo.utils.CodeEnum;</span><br><span class="line">import com.ctgu.upndo.utils.GetNumber;</span><br><span class="line">import com.ctgu.upndo.utils.Result;</span><br><span class="line">import org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line">import org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"></span><br><span class="line">import javax.servlet.http.HttpServletRequest;</span><br><span class="line">import javax.servlet.http.HttpServletResponse;</span><br><span class="line">import java.io.*;</span><br><span class="line">import java.net.HttpURLConnection;</span><br><span class="line">import java.util.ArrayList;</span><br><span class="line">import java.util.List;</span><br><span class="line">import java.util.zip.ZipEntry;</span><br><span class="line">import java.util.zip.ZipOutputStream;</span><br><span class="line"></span><br><span class="line">@RequestMapping(value = &quot;/downloads&quot;)</span><br><span class="line">public class Download &#123;</span><br><span class="line">    @Autowired</span><br><span class="line">    MemberMapper memberMapper;</span><br><span class="line">    @Autowired</span><br><span class="line">    TaskMapper taskMapper;</span><br><span class="line"></span><br><span class="line">    public Result&lt;Integer&gt; downloads(HttpServletResponse res, String list) throws IOException &#123;</span><br><span class="line">        Result&lt;Integer&gt; result = new Result&lt;&gt;();</span><br><span class="line">        List&lt;Integer&gt; numbers = GetNumber.getnumber(list);</span><br><span class="line">        int len = numbers.size();</span><br><span class="line">        List&lt;String&gt; filePaths = new ArrayList&lt;&gt;();</span><br><span class="line">        Member member = new Member();</span><br><span class="line">        //String way = new String();</span><br><span class="line">        for (int i = 0; i &lt; len; i++) &#123;</span><br><span class="line">            member = memberMapper.findMemberById(numbers.get(i));</span><br><span class="line">            filePaths.add(member.getLast());</span><br><span class="line">        &#125;</span><br><span class="line">        Task task = taskMapper.findTaskById(member.getTid());</span><br><span class="line">        String name = task.getTitle();</span><br><span class="line">        result.setResult(CodeEnum.SCCESS);</span><br><span class="line">        try &#123;</span><br><span class="line">            File file = new File(member.getLast());</span><br><span class="line">            String zipBasePath = file.getAbsolutePath();</span><br><span class="line">            String zipName = name + &quot;.zip&quot;;</span><br><span class="line">            String zipFilePath = zipBasePath + File.separator + zipName;</span><br><span class="line"></span><br><span class="line">            res.setCharacterEncoding(&quot;UTF-8&quot;); //设置编码字符</span><br><span class="line">            res.setContentType(&quot;application/force-download;charset=UTF-8&quot;); //设置下载内容类型</span><br><span class="line">            OutputStream out = res.getOutputStream();   //创建页面返回方式为输出流，会自动弹出下载框</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            File zip = new File(zipFilePath);</span><br><span class="line">            if (!zip.exists()) &#123;</span><br><span class="line">                zip.createNewFile();</span><br><span class="line">            &#125;</span><br><span class="line">            //创建zip文件输出流</span><br><span class="line">            ZipOutputStream zos = new ZipOutputStream(new FileOutputStream(zip));</span><br><span class="line">            this.zipFile(zipBasePath, zipName, zipFilePath, filePaths, zos);</span><br><span class="line">            zos.close();</span><br><span class="line">            res.setHeader(&quot;Content-disposition&quot;, &quot;attachment;filename=&quot; + zipName);//设置下载的压缩文件名称</span><br><span class="line"></span><br><span class="line">            //将打包后的文件写到客户端，输出的方法同上，使用缓冲流输出</span><br><span class="line">            BufferedInputStream bis = new BufferedInputStream(new FileInputStream(zipFilePath));</span><br><span class="line">            byte[] buff = new byte[bis.available()];</span><br><span class="line">            bis.read(buff);</span><br><span class="line">            bis.close();</span><br><span class="line">            out.write(buff);//输出数据文件</span><br><span class="line">            out.flush();//释放缓存</span><br><span class="line">            out.close();//关闭输出流</span><br><span class="line">        &#125; catch (Exception e) &#123;</span><br><span class="line">            result.setResult(CodeEnum.DOWNLOAD_ERROR);</span><br><span class="line">        &#125;</span><br><span class="line">        return result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private String zipFile(String zipBasePath, String zipName, String zipFilePath, List&lt;String&gt; filePaths, ZipOutputStream zos) throws IOException &#123;</span><br><span class="line"></span><br><span class="line">        //循环读取文件路径集合，获取每一个文件的路径</span><br><span class="line">        for (String filePath : filePaths) &#123;</span><br><span class="line">            File inputFile = new File(filePath);  //根据文件路径创建文件</span><br><span class="line">            if (inputFile.exists()) &#123; //判断文件是否存在</span><br><span class="line"></span><br><span class="line">                    //创建输入流读取文件</span><br><span class="line">                    BufferedInputStream bis = new BufferedInputStream(new FileInputStream(inputFile));</span><br><span class="line"></span><br><span class="line">                    //将文件写入zip内，即将文件进行打包</span><br><span class="line">                    zos.putNextEntry(new ZipEntry(inputFile.getName()));</span><br><span class="line"></span><br><span class="line">                    //写入文件的方法</span><br><span class="line">                    int size = 0;</span><br><span class="line">                    byte[] buffer = new byte[1024];  //设置读取数据缓存大小</span><br><span class="line">                    while ((size = bis.read(buffer)) &gt; 0) &#123;</span><br><span class="line">                        zos.write(buffer, 0, size);</span><br><span class="line">                    &#125;</span><br><span class="line">                    //关闭输入输出流</span><br><span class="line">                    zos.closeEntry();</span><br><span class="line">                    bis.close();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        return null;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>最后就是我的工具类，里面都是我对字符串的处理的一些类和我的Result类和CodeEnum。<br><img src="https://github.com/iamsnaping/picture/blob/master/utils.png?raw=true" alt="utils"><br>最后就是觉得自己对jpa了解了更多了吧。然后就是吸取了很多教训。虽然做的很不好不过感觉收获还是蛮大的。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/07/26/Manacher‘sAlgorithm/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="无敌 .2.0">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一个不愿透露姓名的网友的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/07/26/Manacher‘sAlgorithm/" itemprop="url">马拉车算法 Manacher‘sAlgorithm  Author:tc</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-07-26T14:42:44+08:00">
                2019-07-26
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>勤劳的tc又来了这回是马拉车。讲道理我应该先学kmp的。算了kmp之后在学。马拉车算法是求最大回文串的。受用面很窄。<br>ok接下来就是algorithm time<br>第一步是先将原本的字符串初始化。将每个字符用一个符号包裹，一般是#。<br>在这个时候字符串无论如何就都是偶数了。有什么用呢，举个例子。我们从下标为1开始。<br>&nbsp;#1#2#2#1#<br>看这里中心位置是 一个#号然后他的下标是index=5，然后这个字符串的半径是r=5，然后原字符串就是 1221，可以看出这回字符串是从0（index-r） 开始 后四位（r-1）。这里是他最神奇的地方。也让他简便了很多。<br>我们一般字符串都是从下标0开始的所以我们在他前面加一个字符串里没有的字符一般,我取的是$。<br>当然这个算法不只这么一点。首先他有一个数组p[i],记录他每个位置的回文串的大小，然后又一个变量mx记录回文串可以到达的最右边下标，他还有个变量id记录该字符串的下标。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">这里在开始匹配前记录回文串半径最小值。  </span><br><span class="line">当```mx&gt;i</span><br></pre></td></tr></table></figure></p>
<p>很容易我们可以得到<figure class="highlight k"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mx-id为半径的字符串是对称的，所以当p[k]的边界在id的边界之内，以下标为i的字符串的半径为p[k]的字符串一定是回文串。而当p[k] 大于id的边界的时候就不能保证对称性了，所以这里就取mx-i。  </span><br><span class="line">当mx &lt; i 这里我们就不能确定对称性了，所以直接取<span class="number">1.</span></span><br><span class="line">以下是代码:</span><br></pre></td></tr></table></figure></p>
<p>#include<iostream></iostream></p>
<p>#include<vector><br>using namespace std;<br>string name,lo;<br>string lon(){<br>    lo=”$”;<br>    int i=0;<br>    while(name.size()&gt;i){<br>        lo+=”#”;<br>        lo+=name[i];<br>        i++;<br>    }<br>    lo+=”#”;<br>    int si=0,index=0;<br>    vector<int> p(lo.size(),0);<br>    i=0;<br>    int mx=0;<br>    int id=0;<br>    int len=lo.size();<br>    for(i;i&lt;len;i++){<br>        p[i]= mx&gt;i? min(p[id*2-i],mx-i):1;<br>        while(lo[i-p[i]]==lo[i+p[i]]) p[i]++;<br>        if(mx&lt;i+p[i]){<br>            mx=i+p[i];<br>            id=i;<br>        }<br>        if(p[i]&gt;si){<br>            index=i;<br>            si=p[i];<br>        }<br>    }<br>    cout&lt;&lt;name&lt;&lt;” “&lt;&lt;endl;<br>    return name.substr((index-si)/2,si-1);<br>}</int></vector></p>
<p>int main(){<br>    name=”11123123312123311”;<br>    cout&lt;&lt;lon();<br>    return 0;<br>}<br><code>`</code></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/06/11/offsetof/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="无敌 .2.0">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一个不愿透露姓名的网友的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/06/11/offsetof/" itemprop="url">offsetof 宏定义</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-06-11T12:13:08+08:00">
                2019-06-11
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><img src="https://raw.githubusercontent.com/iamsnaping/picture/master/%E9%A2%98%E7%9B%AE.png" alt="offsetof"></p>
<p>这里求得是结构体ST他的某一成员的的地址偏移量。就是MEMBER这个成员地址比他的结构体多了多少。<br>首先<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">int *p=(int *)0 ;</span><br><span class="line">cout&lt;&lt;p;</span><br></pre></td></tr></table></figure></p>
<p>他的结果是0，他这里虽然有强制转换，但是赋值的时候他赋0，p的值就是0，不管怎么转换0就是0。<br>所以从内层开始，他这里将0的类型转换成了ST类型，然后取他的成员MEMBER，最后在外面取了地址，（size_t就相当于unsigned int）。<br>成员的地址相当于首地址+偏移量，这里他的首地址为0了，所以直接取的地址就是偏移量了。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/06/03/欧拉函数？/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="无敌 .2.0">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一个不愿透露姓名的网友的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/06/03/欧拉函数？/" itemprop="url">求小于n与n互质的数（冇得证明）</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-06-03T21:25:09+08:00">
                2019-06-03
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>数论真吉尔难啊啊啊！！！！！<br>这里就直接是公式了<br>小于n的质数的个数<br>设n=p<sup>k</sup>,m为小于n的质数的个数m=(p-1)<em>p<sup>k-1</sup>它们的和total=n </em> m/2;</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/06/01/dfs应用1到n约数最多个数/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="无敌 .2.0">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一个不愿透露姓名的网友的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/06/01/dfs应用1到n约数最多个数/" itemprop="url">dfs应用</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-06-01T14:55:05+08:00">
                2019-06-01
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>题目:<a href="https://ac.nowcoder.com/acm/contest/907/B" target="_blank" rel="noopener">牛客网想开了第二题</a><br>首先求一个数约数的个数的公式<br>举个例子<br>12=2<sup>2</sup>x3<sup>1</sup> 那12的约数的个数就是（2+1）*（1+1）个<br>所以这道题的思路就是求他的n以内中最大的数的因数的的指数的乘积的最大值，如果用暴力的话肯定会超时，而一般情况下越大的范围一般就他的约数的个数就越多。<br>根据唯一分解定理，ans=p1<sup>e1</sup>xp2<sup>e2</sup>……pk<sup>ek</sup>,pi为素数且p1&lt;p2&lt;…&lt;pk,<br>那么必有e1&gt;=e2&gt;=…&gt;=ek，(贪心)即后一个素数的幂肯定小于等于前一个素数的幂，这里就用dfs来搜索他的个数。<br>他的数据给的是10<sup>9</sup>所以不用太多的因数，15个足够。<br>code:</p>
<pre><code>#include&lt;iostream&gt;
using namespace std;

typedef long long ll;

ll res[15]={2,3,5,7,11,13,17,19,23,29,31,37,41,43,47};

ll total=0;
ll number;

void dfs(ll k,int lim,ll num,ll cnt){
    if(k&gt;14) return;
    total=max(total,cnt);
    int i=1;
    for(i;i&lt;=lim;i++){
        if(num&lt;=number/res[k]){
            num*=res[k];
            dfs(k+1,i,num,cnt*(i+1));
        }else break;
    }
}

int main(){
    ios::sync_with_stdio(false);
    cin.tie(NULL);
    cout.tie(NULL);
    int t;
    cin&gt;&gt;t;
    int i=0;
    for(i;i&lt;t;i++){
        cin&gt;&gt;number;
        total=1;
        dfs(0,15,1,1);
        cout&lt;&lt;total&lt;&lt;endl;
    }
    return 0;
}
</code></pre><p><strong><font style="color:red;"><strong>注意</strong></font></strong>：这里用的是num&lt;=number/res[k] 主要是防止ll爆掉如果用res[k]*num&lt;=number，long long 可能就爆了。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/05/27/最小生成树&&krustal/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="无敌 .2.0">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一个不愿透露姓名的网友的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/05/27/最小生成树&&krustal/" itemprop="url">krustal,最小生成树</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-05-27T12:50:13+08:00">
                2019-05-27
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>tc is coming,上周的考试真是难受啊！！！！！！！<br>sad，可是还是要好好学算法啊！！！<br>讲道理，我感觉那些博客画那些图还有点看不懂，还是直接说比较好。。。。<br>他要求的其实就是n个点连起来最短的距离。基本可以这么理解。他最重要的一点就是先将个点到各点的距离从小到大排序，然后取最小的就是，这样就 可以取到最小值了！！！！！<br>然后怎么判断有没有重复？那就是并查集来判断有没有在同根了。<br>下面上提目：<br><img src="https://raw.githubusercontent.com/iamsnaping/picture/master/QQ%E6%88%AA%E5%9B%BE20190527124746.png" alt="最小生成树"></p>
<p>code:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;algorithm&gt;</span><br><span class="line">using namespace std;</span><br><span class="line">typedef long long ll;</span><br><span class="line">struct wtc &#123;</span><br><span class="line">	int from,to;</span><br><span class="line">	ll len;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">wtc tc[500100];</span><br><span class="line">int pa[210000],ran[210000];</span><br><span class="line"></span><br><span class="line">bool judge(wtc a,wtc b) &#123;</span><br><span class="line">	return a.len &lt; b.len;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int find(int a) &#123;</span><br><span class="line">	return a == pa[a] ? a : pa[a] = find(pa[a]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void unite(int a,int b) &#123;</span><br><span class="line">	int x = find(a);</span><br><span class="line">	int y = find(b);</span><br><span class="line">	if(x!=y) &#123;</span><br><span class="line">		if(ran[x] &gt; ran[y]) pa[y] = x;</span><br><span class="line">		else &#123;</span><br><span class="line">			pa[x] = y;</span><br><span class="line">			if(x == y) ran[x]++;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int main() &#123;</span><br><span class="line">	ios::sync_with_stdio(false);</span><br><span class="line">	cin.tie(NULL);</span><br><span class="line">	int n,m;</span><br><span class="line">	cin&gt;&gt;n&gt;&gt;m;</span><br><span class="line">	int i = 0;</span><br><span class="line">	for(; i &lt; m; i++)	cin&gt;&gt;tc[i].from &gt;&gt; tc[i].to &gt;&gt; tc[i].len;</span><br><span class="line">	sort(tc,tc + m,judge);</span><br><span class="line">	for(i = 1; i &lt;= n; i++) pa[i] = i;</span><br><span class="line">	int k = 1;</span><br><span class="line">	ll total = 0;</span><br><span class="line">	for(i = 0; i &lt; m; i++) &#123;</span><br><span class="line">		if(k == n) break;</span><br><span class="line">		if(pa[tc[i].from] != pa[tc[i].to]) &#123;</span><br><span class="line">		    total += tc[i].len;</span><br><span class="line">		    unite(tc[i].from,tc[i].to);</span><br><span class="line">			k++;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	cout&lt;&lt;total;</span><br><span class="line">	return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>能不能用二维数组或者一个bool数组判断是否有遍历过？答案是不行的。因为数组和bool只能判断是否用过，这样可能会忽略掉一些东西。比如<br>1 2 1<br>3 4 1<br>2 3 1<br>这样的一组数据用bool或者数组存的话只会加上前两种的长度，不会加上第三个，各样他们就不能连在一起了。并查集则可以将他们连在一起，已经连接过的便不再连接，又因为这里的数组是用sort拍过序的，所以取得就是最小值。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/05/24/欧拉/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="无敌 .2.0">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一个不愿透露姓名的网友的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/05/24/欧拉/" itemprop="url">欧拉筛法</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-05-24T13:27:57+08:00">
                2019-05-24
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>勤奋tc又来了这回是欧拉筛法<br>先从头开始吧，一般的素数筛选基本就是从1开始计算然后一直除到那个数为止。基本就是两个for循环<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">for(int i = 0;i &lt;= sqrt（n）;i++)</span><br><span class="line">&#123;</span><br><span class="line">	for(int j = 2;j &lt; i;j++)</span><br><span class="line">	&#123;</span><br><span class="line">		if(i%j) break;</span><br><span class="line">	&#125;</span><br><span class="line">	if(j == i) num[k++] = i;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>这一种的复杂度很大大概是o（n * sqrt（n））这是一种复杂度很大的算法，一般不会用这个。这里就有一个欧拉筛法了，时间复杂度大概在o（n）左右我们可以知道，每一个素数的n倍都是合数，所以我们找到一个素数的时候就可以将他的n次倍都标计。<br>以下是代码<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;iostream&gt;</span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">int num[1000000];</span><br><span class="line">bool vis[100000];</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">void f(int a) &#123;</span><br><span class="line">	int i = 2;</span><br><span class="line">	for(i; i &lt;= a; i++) &#123;</span><br><span class="line">		if(!vis[i])</span><br><span class="line">			num[++num[0]] = i;</span><br><span class="line">		int len = num[0];</span><br><span class="line">		int j = 1;</span><br><span class="line">		for(j; j &lt;= len &amp;&amp; i * num[j] &lt;= a; j++) &#123;</span><br><span class="line">			vis[i * num[j]] = true;</span><br><span class="line">			if(i%num[j] == 0) break;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int main() &#123;</span><br><span class="line">	int n;</span><br><span class="line">	cin&gt;&gt;n;</span><br><span class="line">	f(n);</span><br><span class="line">	int len = num[0];</span><br><span class="line">	for(int i = 1; i &lt;= len; i++) cout&lt;&lt;num[i]&lt;&lt;&quot; &quot;;</span><br><span class="line">	return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>一个合数有可能不止一个因数，所以这样写的话可能就会导致一个数被重复标记，这样会多余耗时很多，所以我们在这添加一步，i%num[j] == 0 break； 当num[j]是i的因数时，说明i有多个因数，他的更大的倍数可以由其他的更大的数来筛选掉，后面的筛选就没有必要了，所以从这里跳出循环。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/05/23/dijkstra/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="无敌 .2.0">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一个不愿透露姓名的网友的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/05/23/dijkstra/" itemprop="url">迪杰斯特拉&&优化  author：tc</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-05-23T15:48:44+08:00">
                2019-05-23
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>勤劳的tc又来来了啊，这回是迪杰斯特拉啊，呃呃不会英文好难受。。sad。主要是不想学习。。。。<br>还是写博客舒服<br>Dijkstra<br>nice百度到了<br>eee    dijkstra主要是求最短路但是不能有负值不然会有死循环？！他的主要思想就是贪心。先找到每个点离源点最近的点，再根据这个点可以到的那些点，更新源点到这个点，再到这个点可以到的那些点的最短值。然后一步依布更新最后求得最短值。<br>题目：<img src="https://raw.githubusercontent.com/iamsnaping/picture/master/QQ%E6%88%AA%E5%9B%BE20190523153844.png" alt="非负源最短路"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;iomanip&gt;</span><br><span class="line">#include&lt;cmath&gt;</span><br><span class="line">#include&lt;cstring&gt;</span><br><span class="line">#include&lt;algorithm&gt;</span><br><span class="line"></span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">typedef long long ll;</span><br><span class="line"></span><br><span class="line">int mat[2510][2510];</span><br><span class="line">int lenth[5000];</span><br><span class="line">int maxn = 0x3f3f3f;</span><br><span class="line">bool bj[2510];</span><br><span class="line">int n;</span><br><span class="line"></span><br><span class="line">void disk(int des) &#123;</span><br><span class="line">	int i = 0;</span><br><span class="line">	memset(lenth,88,sizeof(lenth));</span><br><span class="line">	for(i = 1; i &lt;= n; i++)</span><br><span class="line">		lenth[i] = mat[des][i];</span><br><span class="line">	bj[des] = true;</span><br><span class="line">	int sta = des;</span><br><span class="line">	for(i = 1; i &lt;= n; i++) &#123;</span><br><span class="line">		maxn = 0x3f3f3f;</span><br><span class="line">		int j = 1;</span><br><span class="line">		for(j; j &lt;= n; j++)</span><br><span class="line">			if(!bj[j] &amp;&amp; maxn &gt; lenth[j]) &#123;</span><br><span class="line">				maxn = lenth[j];</span><br><span class="line">				sta = j;</span><br><span class="line">			&#125;</span><br><span class="line">		bj[sta] = true;</span><br><span class="line">	    j = 1;</span><br><span class="line">		for(;j &lt;= n;j++)</span><br><span class="line">			lenth[j] = min(lenth[j],mat[sta][j] + lenth[sta]);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int main() &#123;</span><br><span class="line">	ios::sync_with_stdio(false);</span><br><span class="line">	int m,s,t;</span><br><span class="line">	cin &gt;&gt; n &gt;&gt; m &gt;&gt; s &gt;&gt; t;</span><br><span class="line">	int i,j;</span><br><span class="line">	memset(mat,maxn,sizeof(mat));</span><br><span class="line">	int sub,sub1,value;</span><br><span class="line">	for(i = 0; i &lt; m; i++) &#123;</span><br><span class="line">		cin &gt;&gt; sub &gt;&gt; sub1 &gt;&gt; value;</span><br><span class="line">		mat[sub][sub1] = value;</span><br><span class="line">		mat[sub1][sub] = value;</span><br><span class="line">	&#125;</span><br><span class="line">	disk(s);</span><br><span class="line">	cout&lt;&lt;lenth[t];</span><br><span class="line">	return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>可以看到，每回都要用循环更新源点到每个点之间最短值的最短值，这是很费时间的，所以这里我们可以用stl库里面的优先队列来优化，只取他的最大值。这里的还要用到greater/less  greater是将小的放前面，从小到大排序stl默认好像是less。。。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;iomanip&gt;</span><br><span class="line">#include&lt;cmath&gt;</span><br><span class="line">#include&lt;cstring&gt;</span><br><span class="line">#include&lt;algorithm&gt;</span><br><span class="line">#include&lt;queue&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">typedef long long ll;</span><br><span class="line"></span><br><span class="line">int mat[2510][2510];</span><br><span class="line">int lenth[5000];</span><br><span class="line">int maxn = 0x3f3f3f;</span><br><span class="line">int n;</span><br><span class="line">typedef pair&lt;int,int&gt; pa;</span><br><span class="line"></span><br><span class="line">priority_queue&lt;pa,vector&lt;pa&gt;,greater&lt;pa&gt; &gt; rec;</span><br><span class="line"></span><br><span class="line">void disk(int des) &#123;</span><br><span class="line">	int i = 0;</span><br><span class="line">	pa p;</span><br><span class="line">	memset(lenth,88,sizeof(lenth));</span><br><span class="line">	for(i = 1; i &lt;= n; i++) &#123;</span><br><span class="line">		lenth[i] = mat[des][i];</span><br><span class="line">		rec.push(pa(mat[des][i],i));</span><br><span class="line">	&#125;</span><br><span class="line">	int sta = des;</span><br><span class="line">     while(!rec.empty())</span><br><span class="line">     &#123;</span><br><span class="line">     	p = rec.top();</span><br><span class="line">     	rec.pop();</span><br><span class="line">     	int sub = p.first;</span><br><span class="line">     	sta = p.second;</span><br><span class="line">     	int j;</span><br><span class="line">     	for(j = 1;j &lt;= n;j++)</span><br><span class="line">     	&#123;</span><br><span class="line">     		if(lenth[j] &gt; lenth[sta] + mat[sta][j])</span><br><span class="line">     		&#123;</span><br><span class="line">     			lenth[j] = lenth[sta] + mat[sta][j];</span><br><span class="line">     			rec.push(pa(lenth[j],j));</span><br><span class="line">			 &#125;</span><br><span class="line">		 &#125;</span><br><span class="line">	 &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int main() &#123;</span><br><span class="line">	ios::sync_with_stdio(false);</span><br><span class="line">	int m,s,t;</span><br><span class="line">	cin &gt;&gt; n &gt;&gt; m &gt;&gt; s &gt;&gt; t;</span><br><span class="line">	int i,j;</span><br><span class="line">	memset(mat,maxn,sizeof(mat));</span><br><span class="line">	int sub,sub1,value;</span><br><span class="line">	for(i = 0; i &lt; m; i++) &#123;</span><br><span class="line">		cin &gt;&gt; sub &gt;&gt; sub1 &gt;&gt; value;</span><br><span class="line">		mat[sub][sub1] = value;</span><br><span class="line">		mat[sub1][sub] = value;</span><br><span class="line">	&#125;</span><br><span class="line">	disk(s);</span><br><span class="line">	cout&lt;&lt;lenth[t];</span><br><span class="line">	return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">无敌 .2.0</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">14</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            

            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">无敌 .2.0</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
